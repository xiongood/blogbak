---
title: CAP原则
author: 张一雄
summary: 理论性质的东西，希望可以帮助到大家
img: https://pub-b24cf0a8c1f14e9386435977aa464959.r2.dev/img/20230816145942.png
categories:
 - 后端
tags:
 - CAP
 - java
---

## CAP原则

### 说明

C：一致性

在分布式系统中，所有节点在同一时刻的数据都是一致的。

A ：可用性

在集群中一部分节点故障后，集群整体是否还能响应客户端的读写请求。即每个请求不管成功与否都能得到响应。

P ：分区容错性

保证系统中任意信息的丢失都不会影响系统的运行。

一个分布式系统里面，节点组成的网络本来应该是连通的。然而可能因为一些故障，使得有些节点之间不连通了，整个网络就分成了几块区域。数据就散布在了这些不连通的区域中。这就叫分区。

在一个分布式系统中，三种特性不可兼得只能同时拥有两种特性。在大多数的分布式架构中，常见的AP模型，抛弃了系统的一致性。

### 例子

比如说redis集群，当集群中某一个节点挂掉后，仍然可以访问该集群，并且可以从该集群中获得想要的数据，只是获得的数据可能与该节点挂掉前不同。这就是系统抛弃一致性而选用可用性的一个AP模型的例子。

但是在好多银行或者证券的系统中，大部分都是会选用CP模型，宁愿系统不可用，也不能出现错误的信息。

从目前来看，没有CA模型，就是说我们不可能抛弃分区容错行。因为我们不能保证我的网络一直通常，也不能保证服务器一直都处于正常可用状态。

现在好多的架构都实现了两种性质，至于使用哪种方式可以由我们自行选择。比如Eureka实现的注册中心，当一个服务挂掉后，注册中心并不会马上将这个服务从注册中心剔除，而是会等待一会儿，这样的模式就抛弃了一致性的AP模型。当然我们也可以进行配置，实现CP模型的注册中心。nacos也有同样的功能。
